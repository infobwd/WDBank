<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>WDBank • Gamification</title>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
<header class="brand">
  <div class="brand-left">
    <img src="logo.png" alt="logo" class="logo"/>
    <div>
      <div class="brand-title">WDBank</div>
      <div class="brand-sub">ออมก่อนใช้ • โรงเรียนบ้านวังด้ง</div>
    </div>
  </div>
  <div class="brand-right">
    <img id="avatar" class="avatar" src="https://i.pravatar.cc/80" alt="avatar"/>
  </div>
</header>

<main>
  <!-- Mini Tips -->
  <section class="card">
    <div class="section-head">
      <div class="title"><i class="fa-solid fa-lightbulb"></i> เคล็ด(ไม่)ลับการออม</div>
    </div>
    <div id="miniTip" class="mini-tip sk sk-title">กำลังโหลด…</div>
  </section>

  <!-- บัญชีเด่น -->
  <section id="card-highlight" class="card">
    <div class="section-head"><div class="title">บัญชีเด่น <span class="muted small">(เข้าเงื่อนไข 2 ข้อ)</span></div></div>
    <div id="highlightNote" class="muted small">เงื่อนไข: <b>ฝากบ่อยกว่าค่าเฉลี่ยของโรงเรียน (เดือนนี้)</b> และ <b>ไม่มีรายการถอนในเดือนปัจจุบัน</b></div>
    <div id="highlightGrid" class="hi-grid">
      <div class="hi-item sk sk-card"></div>
      <div class="hi-item sk sk-card"></div>
      <div class="hi-item sk sk-card"></div>
    </div>
  </section>

  <!-- Gamification -->
  <section id="view-gamify" class="card">
    <div class="section-head"><div class="title">เกมมิฟิเคชัน: ออมให้เป็นนิสัย</div></div>
    <div class="muted small">ภารกิจรายสัปดาห์, ลีดเดอร์บอร์ดรายชั้น, และสตรีคต่อเนื่อง</div>

    <div class="gm-wrap">
      <div class="gm-card">
        <div class="gm-h">ภารกิจสัปดาห์นี้</div>
        <div class="gm-sub">เป้าหมาย: ฝากอย่างน้อย <b>3</b> ครั้ง/บัญชี ภายในสัปดาห์นี้</div>
        <div class="gm-progress sk sk-card"><div id="gmProgressBar" class="gm-bar" style="width:0%"></div></div>
        <div class="gm-stat">
          <span>สำเร็จ: <b id="gmDone">-</b> บัญชี</span>
          <span>จากทั้งหมด: <b id="gmTotal">-</b> บัญชี</span>
          <span>คิดเป็น: <b id="gmPct">0%</b></span>
        </div>
      </div>

      <div class="gm-card">
        <div class="gm-h">ลีดเดอร์บอร์ด (รายชั้น • สัปดาห์นี้)</div>
        <div class="gm-sub">เรียงตามเฉลี่ยจำนวนครั้งฝากต่อบัญชี (Top 5)</div>
        <div id="gmClassTop" class="gm-list">
          <div class="gm-item sk sk-card"></div>
          <div class="gm-item sk sk-card"></div>
          <div class="gm-item sk sk-card"></div>
        </div>
      </div>
    </div>

    <div class="gm-card">
      <div class="gm-h">สตรีคต่อเนื่อง (Top 5)</div>
      <div class="gm-sub">นับจำนวนวันติดต่อกันที่มีรายการฝาก (ย้อนหลัง 30 วัน)</div>
      <div id="gmStreakTop" class="gm-grid">
        <div class="gm-badge sk sk-card"></div>
        <div class="gm-badge sk sk-card"></div>
        <div class="gm-badge sk sk-card"></div>
      </div>
    </div>

    <div class="gm-card">
      <div class="gm-h">ภารกิจเฉพาะห้อง</div>
      <div class="gm-sub">เลือกชั้น/ห้องเพื่อดูความคืบหน้า (เป้าหมาย: ฝาก ≥ 3 ครั้ง/บัญชี ภายในสัปดาห์นี้)</div>
      <div class="gm-row">
        <select id="gmClassSelect" class="gm-select sk sk-title"><option>กำลังโหลด…</option></select>
        <button id="gmShareClass" class="btn btn-line"><i class="fa-brands fa-line"></i> แชร์ผลภารกิจห้องนี้</button>
      </div>
      <div class="gm-progress sk sk-card"><div id="gmClsBar" class="gm-bar" style="width:0%"></div></div>
      <div class="gm-stat">
        <span>สำเร็จ: <b id="gmClsDone">-</b> บัญชี</span>
        <span>จากทั้งหมด: <b id="gmClsTotal">-</b> บัญชี</span>
        <span>คิดเป็น: <b id="gmClsPct">0%</b></span>
      </div>
    </div>
  </section>
</main>

<footer class="foot">© 2025 WDBank • WD Team</footer>

<script>
  // Config (พี่ตั้ง LIFF_ID ไว้ที่นี่ได้)
  window.LIFF_ID = window.LIFF_ID || "";
  window.SHEET_TX = "https://opensheet.elk.sh/1EZtfvb0h9wYZbRFTGcm0KVPScnyu6B-boFG6aMpWEUo/Sortรายการฝากและถอน";
  window.SHEET_ACCOUNTS = "https://opensheet.elk.sh/1EZtfvb0h9wYZbRFTGcm0KVPScnyu6B-boFG6aMpWEUo//บัญชี";
</script>
<script src="app.js"></script>
</body>
</html>
